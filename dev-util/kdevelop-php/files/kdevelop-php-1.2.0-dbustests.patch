--- kdevelop-php-9999/completion/tests/CMakeLists.txt
+++ kdevelop-php-9999/completion/tests/CMakeLists.txt
@@ -8,16 +8,8 @@
 
 set(completiontest_SRCS test_completion.cpp
     ../../duchain/tests/duchaintestbase.cpp)
-kde4_add_unit_test(completiontest ${completiontest_SRCS})
-target_link_libraries(completiontest
-    kdev4phpcompletion
-    kdev4phpduchain
-    kdev4phpparser
-    ${QT_QTTEST_LIBRARY}
-    ${KDEVPLATFORM_TESTS_LIBRARIES}
-    ${KDEVPLATFORM_LANGUAGE_LIBRARIES}
-)
 # hack to make ../../duchain/tests/duchaintestbase.h use the correct EXPORT tags when compiling with MinGW
+
 if (MINGW)
     set_property(TARGET completiontest APPEND_STRING PROPERTY COMPILE_FLAGS " -DMAKE_KDEV4PHPDUCHAIN_LIB")
 endif (MINGW)
@@ -25,15 +17,7 @@
 
 set(completionbench_SRCS bench_completion.cpp
     ../../duchain/tests/duchaintestbase.cpp)
-kde4_add_unit_test(completionbenchmark ${completionbench_SRCS})
-target_link_libraries(completionbenchmark
-    kdev4phpcompletion
-    kdev4phpduchain
-    kdev4phpparser
-    ${QT_QTTEST_LIBRARY}
-    ${KDEVPLATFORM_TESTS_LIBRARIES}
-    ${KDEVPLATFORM_LANGUAGE_LIBRARIES}
-)
+
 # hack to make ../../duchain/tests/duchaintestbase.h use the correct EXPORT tags when compiling with MinGW
 if (MINGW)
     set_property(TARGET completionbenchmark APPEND_STRING PROPERTY COMPILE_FLAGS " -DMAKE_KDEV4PHPDUCHAIN_LIB")

--- kdevelop-php-9999/duchain/tests/CMakeLists.txt
+++ kdevelop-php-9999-patched/duchain/tests/CMakeLists.txt
@@ -9,14 +9,7 @@
 set(duchain_SRCS
     duchain.cpp
     duchaintestbase.cpp)
-kde4_add_unit_test(duchain ${duchain_SRCS})
-target_link_libraries(duchain
-    kdev4phpduchain
-    kdev4phpparser
-    ${QT_QTTEST_LIBRARY}
-    ${KDEVPLATFORM_TESTS_LIBRARIES}
-    ${KDEVPLATFORM_LANGUAGE_LIBRARIES}
-)
+
 # hack to make ../duchaintestbase.h use the correct EXPORT tags when compiling with MinGW
 if (MINGW)
     set_property(TARGET duchain APPEND_STRING PROPERTY COMPILE_FLAGS " -DMAKE_KDEV4PHPDUCHAIN_LIB")
@@ -26,14 +19,7 @@
 set(expressionparser_SRCS
     expressionparser.cpp
     duchaintestbase.cpp)
-kde4_add_unit_test(expressionparser ${expressionparser_SRCS})
-target_link_libraries(expressionparser
-    kdev4phpduchain
-    kdev4phpparser
-    ${QT_QTTEST_LIBRARY}
-    ${KDEVPLATFORM_TESTS_LIBRARIES}
-    ${KDEVPLATFORM_LANGUAGE_LIBRARIES}
-)
+
 # hack to make ../duchaintestbase.h use the correct EXPORT tags when compiling with MinGW
 if (MINGW)
     set_property(TARGET expressionparser APPEND_STRING PROPERTY COMPILE_FLAGS " -DMAKE_KDEV4PHPDUCHAIN_LIB")
@@ -43,15 +29,7 @@
 set(uses_SRCS
     uses.cpp
     duchaintestbase.cpp)
-kde4_add_unit_test(uses ${uses_SRCS})
-target_link_libraries(uses
-    kdev4phpduchain
-    kdev4phpparser
-    ${QT_QTTEST_LIBRARY}
-    ${KDEVPLATFORM_INTERFACES_LIBRARIES}
-    ${KDEVPLATFORM_TESTS_LIBRARIES}
-    ${KDEVPLATFORM_LANGUAGE_LIBRARIES}
-)
+
 # hack to make ../duchaintestbase.h use the correct EXPORT tags when compiling with MinGW
 if (MINGW)
     set_property(TARGET uses APPEND_STRING PROPERTY COMPILE_FLAGS " -DMAKE_KDEV4PHPDUCHAIN_LIB")
@@ -62,15 +40,7 @@
     benchmarks.cpp
     duchaintestbase.cpp
 )
-kde4_add_unit_test(benchmarks ${benchmarks_SRCS})
-target_link_libraries(benchmarks
-    kdev4phpduchain
-    kdev4phpparser
-    ${QT_QTTEST_LIBRARY}
-    ${KDEVPLATFORM_INTERFACES_LIBRARIES}
-    ${KDEVPLATFORM_TESTS_LIBRARIES}
-    ${KDEVPLATFORM_LANGUAGE_LIBRARIES}
-)
+
 # hack to make ../duchaintestbase.h use the correct EXPORT tags when compiling with MinGW
 if (MINGW)
     set_property(TARGET benchmarks APPEND_STRING PROPERTY COMPILE_FLAGS " -DMAKE_KDEV4PHPDUCHAIN_LIB")
@@ -81,15 +51,7 @@
     duchain_multiplefiles.cpp
     duchaintestbase.cpp
 )
-kde4_add_unit_test(duchain_multiplefiles ${duchain_multiplefiles_SRCS})
-target_link_libraries(duchain_multiplefiles
-    kdev4phpduchain
-    kdev4phpparser
-    ${QT_QTTEST_LIBRARY}
-    ${KDEVPLATFORM_INTERFACES_LIBRARIES}
-    ${KDEVPLATFORM_TESTS_LIBRARIES}
-    ${KDEVPLATFORM_LANGUAGE_LIBRARIES}
-)
+
 # hack to make ../duchaintestbase.h use the correct EXPORT tags when compiling with MinGW
 if (MINGW)
     set_property(TARGET duchain_multiplefiles APPEND_STRING PROPERTY COMPILE_FLAGS " -DMAKE_KDEV4PHPDUCHAIN_LIB")
